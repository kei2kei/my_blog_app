<h3>タイトル：<%= @post.title %></h3>
<% if current_user.can_sync_to_github? && current_user.id == @post.user_id %>
  <%= button_to "GitHubに同期", sync_to_github_post_path(@post), method: :patch, class: "btn btn-outline-primary btn-sm" %>
<% end %>
<p>ステータス：<%= @post.unsolved? ? '未解決' : '解決済み' %></p>
<div class="prose">
  <p>内容：<%= rendered_content_html(@post.content) %></p>
</div>
<p>投稿者：<%= @post.user.name %></p>
<% if @post.github_url.present? && current_user.id == @post.user_id %>
  <div class="mt-3">
    <small class="text-muted">
      <i class="fab fa-github"></i>
      <%= link_to "GitHubで見る", @post.github_url, target: "_blank" %>
      （最終同期: <%= @post.github_synced_at.strftime('%Y/%m/%d %H:%M') %>）
    </small>
  </div>
<% end %>
<% if @post.tags.any? %>
  <p>タグ：<%= @post.tags.map(&:name).join(', ') %></p>
<% end %>
<%= render 'comments/form', comment: @comment, parent_comment: @parent_comment, post: @post %>
<% @comments.each do |comment| %>
  <%= render 'comments/comment', comment: comment, post: @post %>
<% end %>
<% if current_user && current_user.id == @post.user_id %>
  <%= link_to "編集", edit_post_path(@post) %>
  <%= link_to "削除", post_path(@post), data: { turbo_method: :delete, confirm: "本当に削除しますか？" } %>
  <% if @post.unsolved? %>
    <%= button_to "解決した", solve_post_path(@post), method: :patch, data: { confirm: 'この問題を解決済みにしますか？' } %>
  <% end %>
<% end%>
<%= link_to "戻る", root_path %>