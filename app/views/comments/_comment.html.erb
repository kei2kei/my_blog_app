<% comments.each do |comment| %>
  <div class="comment ml-20" data-controller="comment">
    <p>回答者：<%= comment.user.name %></p>
    <p>内容：<%= comment.content %></p>
    <% if current_user && current_user.id == comment.user.id %>
      <p><%= link_to "削除", post_comment_path(post,comment), data: { turbo_method: :delete, confirm: "本当に削除しますか？" } %></p>
    <% end%>
    <button data-action="click->comment#showReplyForm" data-comment-id="<%= comment.id %>">返信</button>
    <% if comment.replies.any? %>
      <div class="replies">
        <%= render partial: 'comments/reply', locals: { replies: comment.replies, post: @post } %>
      </div>
    <% end %>
  </div>
<% end %>